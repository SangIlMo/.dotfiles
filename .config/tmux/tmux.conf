# ~/.config/tmux/tmux.conf
# Functional status bar with Catppuccin Mocha theme

# ── General ────────────────────────────────────────────
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -ag terminal-overrides ",*:Smulx=\E[4::%p1%dm"  # undercurl support
set -ag terminal-overrides ",*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m"  # underline color

set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g history-limit 50000
set -g status-interval 5
set -g escape-time 0
set -g focus-events on
set -g set-clipboard on

# ── Prefix ─────────────────────────────────────────────
# Keep default C-b, add C-a as secondary
set -g prefix C-b
set -g prefix2 C-a

# Reload config
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded"

# ── Pane splitting ─────────────────────────────────────
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ── Catppuccin Mocha Colors ────────────────────────────
# Base:     #1e1e2e    Surface0: #313244    Surface1: #45475a
# Text:     #cdd6f4    Subtext0: #a6adc8    Overlay0: #6c7086
# Blue:     #89b4fa    Green:    #a6e3a1    Yellow:   #f9e2af
# Red:      #f38ba8    Mauve:    #cba6f7    Lavender: #b4befe

# ── Status Bar ─────────────────────────────────────────
set -g status-position bottom
set -g status-style "bg=#313244,fg=#cdd6f4"

# Left: [session:window] directory git-branch
set -g status-left-length 80
set -g status-left "#[fg=#1e1e2e,bg=#89b4fa,bold] #S:#I #[fg=#89b4fa,bg=#313244] #[fg=#b4befe]#{=/30/…:#{s|$HOME|~|:pane_current_path}} #(~/.config/tmux/scripts/git-info.sh '#{pane_current_path}') #[fg=#45475a]│ "

# Right: claude-status | sys-info | time
set -g status-right-length 120
set -g status-right "#(~/.config/tmux/scripts/claude-status.sh) #[fg=#45475a]│ #(~/.config/tmux/scripts/sys-info.sh) #[fg=#45475a]│ #[fg=#a6adc8]%H:%M "

# ── Window Tabs ────────────────────────────────────────
set -g window-status-format "#[fg=#6c7086] #I:#W "
set -g window-status-current-format "#[fg=#1e1e2e,bg=#b4befe,bold] #I:#W "
set -g window-status-separator ""

# ── Pane Borders ───────────────────────────────────────
set -g pane-border-style "fg=#45475a"
set -g pane-active-border-style "fg=#89b4fa"

# ── Messages ───────────────────────────────────────────
set -g message-style "bg=#313244,fg=#cdd6f4"
set -g message-command-style "bg=#313244,fg=#cdd6f4"

# ── Copy Mode ──────────────────────────────────────────
setw -g mode-style "bg=#45475a,fg=#cdd6f4"
